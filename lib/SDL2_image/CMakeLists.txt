# Point to the install locations of png and SDL2
list(APPEND CMAKE_PREFIX_PATH "${CMAKE_CURRENT_BINARY_DIR}/../png")
list(APPEND CMAKE_PREFIX_PATH "${CMAKE_CURRENT_BINARY_DIR}/../SDL2")

# ExternalProject cannot handle regular CMake lists, replace the list separator with some other separator
string (REPLACE ";" "|" MULTIPLE_PREFIX_PATH "${CMAKE_PREFIX_PATH}")

include(ExternalProject)
ExternalProject_Add(
    libSDL2_image
    URL ${CMAKE_CURRENT_LIST_DIR}/SDL2_image-2.6.3.zip
    URL_HASH SHA256=b448a8ca5b7927d9bd1577d393f4d6c59581f87ee525652a27e699941db37b7c
    LIST_SEPARATOR | # Specify the new separator to ExternalProject
    CMAKE_ARGS -DCMAKE_OSX_DEPLOYMENT_TARGET=${CMAKE_OSX_DEPLOYMENT_TARGET} -DCMAKE_PREFIX_PATH=${MULTIPLE_PREFIX_PATH} -DCMAKE_INSTALL_PREFIX=${CMAKE_CURRENT_BINARY_DIR} -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} -DBUILD_SHARED_LIBS=OFF -USDL2IMAGE_DEBUG_POSTFIX -DSDL2IMAGE_DEBUG_POSTFIX= -DSDL2IMAGE_SAMPLES=OFF -DSDL2IMAGE_JPG=OFF
	DEPENDS libpng
)
